{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "db_type": {
      "type": "string",
      "defaultValue": "Postgresql_deploy.json"
    },
    "db_user": {
      "type": "string",
      "defaultValue": "db-user"
    }
  },
  "variables": {
    "azureSqlServerName": "serverName",
    "postgres_db_user": "[concat(parameters('db_user'), '@', variables('azureSqlServerName'))]",
    "db_user": "[if(or(equals(parameters('db_type'), 'Postgresql_deploy.json'),equals(parameters('db_type'),'Postgresql_existing.json')),  variables('postgres_db_user'), parameters('db_user'))]"
  },
  "resources": [
  ],
  "outputs": {
    "stringOutput": {
      "type": "string",
      "value": "[variables('db_user')]"
    }
  }
}