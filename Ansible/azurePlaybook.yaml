---
- name: Azure Infra Provision
  hosts: localhost
  connection: local
  tasks:
  - name: Create Azure Deploy
    azure_rm_deployment:
      resource_group: AzureAnsibleResourceGroup
      location: eastus
      name: AzureAnsibleInfra
      parameters:
        vnetName:
          value: "vnetAnsible"
        vnetAddressRange:
          value: "10.0.0.0/16"
        subnetAddressRange:
          value: "10.0.0.0/24"
        location:
          value: "eastus"
        adminUsername:
          value: "ubuntu"
        adminPublicKey:
          value: xxx
        sizeOfDiskInGB:
          value: 128
        vmSize:
          value: Standard_D2s_v3
        numberOfArtifactory:
          value: 2
        numberOfXray:
          value: 2
        numberOfDb:
          value: 1
      template_link: 'https://raw.githubusercontent.com/jfrog/JFrog-Cloud-Installers/ansible-rt7/Ansible/infra/azure/lb-rt-xray-ha.json'